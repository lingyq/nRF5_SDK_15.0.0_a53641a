<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1033px" preserveAspectRatio="none" style="width:852px;height:1033px;" version="1.1" viewBox="0 0 852 1033" width="852px" zoomAndPan="magnify"><defs><filter height="300%" id="f1qjf7lux1jxyg" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" height="1018.1602" style="stroke: #A80036; stroke-width: 1.0;" width="317" x="100" y="4"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="222.5" y="16.4065">Application</text><rect fill="#DDDDDD" height="1018.1602" style="stroke: #A80036; stroke-width: 1.0;" width="149" x="675" y="4"/><rect fill="#FFFFFF" filter="url(#f1qjf7lux1jxyg)" height="471.3315" style="stroke: #000000; stroke-width: 2.0;" width="746" x="94" y="479.6313"/><rect fill="#FFFFFF" height="297.939" style="stroke: none; stroke-width: 1.0;" width="746" x="94" y="653.0239"/><rect fill="#FFFFFF" filter="url(#f1qjf7lux1jxyg)" height="113.7949" style="stroke: #000000; stroke-width: 2.0;" width="578" x="252" y="731.6216"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="74.146" y2="138.0435"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="138.0435" y2="178.6924"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="178.6924" y2="294.4873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="294.4873" y2="335.1362"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="335.1362" y2="364.085"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="364.085" y2="404.7339"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="404.7339" y2="496.5801"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="496.5801" y2="537.229"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="537.229" y2="655.0239"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="655.0239" y2="695.6729"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="695.6729" y2="852.4165"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="852.4165" y2="893.0654"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="893.0654" y2="967.9629"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="74.146" y2="138.0435"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="138.0435" y2="178.6924"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="178.6924" y2="294.4873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="294.4873" y2="335.1362"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="335.1362" y2="364.085"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="364.085" y2="404.7339"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="404.7339" y2="496.5801"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="496.5801" y2="537.229"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="537.229" y2="655.0239"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="655.0239" y2="695.6729"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="695.6729" y2="852.4165"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="852.4165" y2="893.0654"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="893.0654" y2="967.9629"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="74.146" y2="138.0435"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="138.0435" y2="178.6924"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="178.6924" y2="294.4873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="294.4873" y2="335.1362"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="335.1362" y2="364.085"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="364.085" y2="404.7339"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="404.7339" y2="496.5801"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="496.5801" y2="537.229"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="537.229" y2="655.0239"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="655.0239" y2="695.6729"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="695.6729" y2="852.4165"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="852.4165" y2="893.0654"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="893.0654" y2="967.9629"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="595" y1="74.146" y2="138.0435"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="595" x2="595" y1="138.0435" y2="178.6924"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="595" y1="178.6924" y2="294.4873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="595" x2="595" y1="294.4873" y2="335.1362"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="595" y1="335.1362" y2="364.085"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="595" x2="595" y1="364.085" y2="404.7339"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="595" y1="404.7339" y2="496.5801"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="595" x2="595" y1="496.5801" y2="537.229"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="595" y1="537.229" y2="655.0239"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="595" x2="595" y1="655.0239" y2="695.6729"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="595" y1="695.6729" y2="852.4165"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="595" x2="595" y1="852.4165" y2="893.0654"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="595" y1="893.0654" y2="967.9629"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="749" y1="74.146" y2="138.0435"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="749" x2="749" y1="138.0435" y2="178.6924"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="749" y1="178.6924" y2="294.4873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="749" x2="749" y1="294.4873" y2="335.1362"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="749" y1="335.1362" y2="364.085"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="749" x2="749" y1="364.085" y2="404.7339"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="749" y1="404.7339" y2="496.5801"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="749" x2="749" y1="496.5801" y2="537.229"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="749" y1="537.229" y2="655.0239"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="749" x2="749" y1="655.0239" y2="695.6729"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="749" y1="695.6729" y2="852.4165"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="749" x2="749" y1="852.4165" y2="893.0654"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="749" y1="893.0654" y2="967.9629"/><rect fill="#FEFECE" filter="url(#f1qjf7lux1jxyg)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="55" x="104" y="39.0474"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="111" y="59.4082">main.c</text><rect fill="#FEFECE" filter="url(#f1qjf7lux1jxyg)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="55" x="104" y="966.9629"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="111" y="987.3237">main.c</text><rect fill="#FEFECE" filter="url(#f1qjf7lux1jxyg)" height="46.1973" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="274" y="22.9487"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="281" y="43.3096">Application support</text><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="315" y="59.4082">modules</text><rect fill="#FEFECE" filter="url(#f1qjf7lux1jxyg)" height="46.1973" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="274" y="966.9629"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="281" y="987.3237">Application support</text><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="315" y="1003.4224">modules</text><rect fill="#FEFECE" filter="url(#f1qjf7lux1jxyg)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="423" y="39.0474"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="430" y="59.4082">Mesh stack</text><rect fill="#FEFECE" filter="url(#f1qjf7lux1jxyg)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="423" y="966.9629"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="430" y="987.3237">Mesh stack</text><rect fill="#FEFECE" filter="url(#f1qjf7lux1jxyg)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="143" x="522" y="39.0474"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129" x="529" y="59.4082">Generic OnOff client</text><rect fill="#FEFECE" filter="url(#f1qjf7lux1jxyg)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="143" x="522" y="966.9629"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129" x="529" y="987.3237">Generic OnOff client</text><rect fill="#FEFECE" filter="url(#f1qjf7lux1jxyg)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="679" y="39.0474"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="686" y="59.4082">Mesh core modules</text><rect fill="#FEFECE" filter="url(#f1qjf7lux1jxyg)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="679" y="966.9629"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="686" y="987.3237">Mesh core modules</text><polygon fill="#FBFB77" filter="url(#f1qjf7lux1jxyg)" points="8,89.146,8,128.146,255,128.146,255,99.146,245,89.146,8,89.146" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="245" y1="89.146" y2="99.146"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="245" y1="99.146" y2="99.146"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="14" y="106.5525">init_params defines UUID, core params</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="18" y="121.5012">and event callbacks</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="423" y="162.5413">Initialize</text><polygon fill="#A80036" points="331.5,194.6924,341.5,198.6924,331.5,202.6924,335.5,198.6924" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="337.5" y1="198.6924" y2="198.6924"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="140.5" y="195.0989">mesh_softdevice_init(...)</text><polygon fill="#A80036" points="331.5,223.6411,341.5,227.6411,331.5,231.6411,335.5,227.6411" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="337.5" y1="227.6411" y2="227.6411"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="140.5" y="224.0476">mesh_app_uuid_gen(...)</text><polygon fill="#A80036" points="455.5,252.5898,465.5,256.5898,455.5,260.5898,459.5,256.5898" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="461.5" y1="256.5898" y2="256.5898"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="140.5" y="252.9963">mesh_stack_init(...)</text><polygon fill="#A80036" points="737.5,281.5386,747.5,285.5386,737.5,289.5386,741.5,285.5386" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467.5" x2="743.5" y1="285.5386" y2="285.5386"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="474.5" y="281.9451">Initialize: Mesh and Foundation models</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="443" y="318.9851"/><polygon fill="#A80036" points="583.5,351.1362,593.5,355.1362,583.5,359.1362,587.5,355.1362" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="589.5" y1="355.1362" y2="355.1362"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="140.5" y="351.5427">generic_onoff_client_init(...) x 2</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="23" x="430" y="388.5828">Start</text><polygon fill="#A80036" points="455.5,420.7339,465.5,424.7339,455.5,428.7339,459.5,424.7339" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="461.5" y1="424.7339" y2="424.7339"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="140.5" y="421.1404">mesh_stack_start()</text><polygon fill="#FBFB77" filter="url(#f1qjf7lux1jxyg)" points="389,438.6826,389,462.6826,542,462.6826,542,448.6826,532,438.6826,389,438.6826" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="532" x2="532" y1="438.6826" y2="448.6826"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="532" y1="448.6826" y2="448.6826"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="395" y="456.0891">Start dynamic behavior</text><rect fill="none" height="471.3315" style="stroke: #000000; stroke-width: 2.0;" width="746" x="94" y="479.6313"/><polygon fill="#EEEEEE" points="94,479.6313,155,479.6313,155,485.6313,145,495.6313,94,495.6313,94,479.6313" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="109" y="493.0378">alt</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="400" y="521.0779">Provisioned node</text><polygon fill="#A80036" points="144.5,553.229,134.5,557.229,144.5,561.229,140.5,557.229" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="138.5" x2="594.5" y1="557.229" y2="557.229"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="150.5" y="553.6355">onoff_status_cb(...)</text><polygon fill="#A80036" points="144.5,582.1777,134.5,586.1777,144.5,590.1777,140.5,586.1777" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="138.5" x2="594.5" y1="586.1777" y2="586.1777"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="150.5" y="582.5842">ack_transaction_status_cb(...)</text><polygon fill="#A80036" points="144.5,611.1265,134.5,615.1265,144.5,619.1265,140.5,615.1265" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="138.5" x2="594.5" y1="615.1265" y2="615.1265"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="150.5" y="611.533">periodic_publish_cb(...)</text><polygon fill="#A80036" points="583.5,640.0752,593.5,644.0752,583.5,648.0752,587.5,644.0752" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="589.5" y1="644.0752" y2="644.0752"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="140.5" y="640.4817">generic_onoff_client_set/set_unack(...)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="94" x2="840" y1="654.0239" y2="654.0239"/><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="389.5" y="679.5217">Unprovisioned device</text><polygon fill="#A80036" points="331.5,711.6729,341.5,715.6729,331.5,719.6729,335.5,715.6729" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="337.5" y1="715.6729" y2="715.6729"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="140.5" y="712.0793">mesh_provisionee_prov_start(...)</text><rect fill="none" height="113.7949" style="stroke: #000000; stroke-width: 2.0;" width="578" x="252" y="731.6216"/><polygon fill="#EEEEEE" points="252,731.6216,430,731.6216,430,737.6216,420,747.6216,252,747.6216,252,731.6216" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="267" y="745.0281">Initialize provisionee</text><polygon fill="#FBFB77" filter="url(#f1qjf7lux1jxyg)" points="262,753.5703,262,777.5703,421,777.5703,421,763.5703,411,753.5703,262,753.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="411" x2="411" y1="753.5703" y2="763.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="421" x2="411" y1="763.5703" y2="763.5703"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="268" y="770.9768">Define OOB capabilities</text><polygon fill="#A80036" points="737.5,803.519,747.5,807.519,737.5,811.519,741.5,807.519" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="743.5" y1="807.519" y2="807.519"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="350.5" y="803.9255">Start unprovisioned device beacon</text><polygon fill="#A80036" points="737.5,832.4678,747.5,836.4678,737.5,840.4678,741.5,836.4678" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="743.5" y1="836.4678" y2="836.4678"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="350.5" y="832.8743">Listen for provisioning invite</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="157" x="363" y="876.9143">Wait for provisioning to complete</text><polygon fill="#A80036" points="354.5,909.0654,344.5,913.0654,354.5,917.0654,350.5,913.0654" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="348.5" x2="748.5" y1="913.0654" y2="913.0654"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="360.5" y="909.4719">Provisioning Events</text><polygon fill="#A80036" points="144.5,938.0142,134.5,942.0142,144.5,946.0142,140.5,942.0142" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="138.5" x2="342.5" y1="942.0142" y2="942.0142"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="150.5" y="938.4207">provisioning_complete_cb()</text><!--
@startuml
skinparam defaultFontName Arial
box "Application" #FFFFFF
participant a as "main.c"
participant ah as "Application support\nmodules"
end box
participant c as "Mesh stack"
participant s as "Generic OnOff client"
box
participant core as "Mesh core modules"
end box

note over a: init_params defines UUID, core params\n and event callbacks
... Initialize ...
a -> ah: mesh_softdevice_init(...)
a -> ah: mesh_app_uuid_gen(...)
a -> c: mesh_stack_init(...)
c -> core: Initialize: Mesh and Foundation models
... ...
a -> s: generic_onoff_client_init(...) x 2
... Start ...
a -> c: mesh_stack_start()
note over c: Start dynamic behavior


alt
    ... Provisioned node ...
    a <- s: onoff_status_cb(...)
    a <- s: ack_transaction_status_cb(...)
    a <- s: periodic_publish_cb(...)
    a -> s: generic_onoff_client_set/set_unack(...)
else
    ... Unprovisioned device ...
    a -> ah: mesh_provisionee_prov_start(...)
    group Initialize provisionee
    note over ah: Define OOB capabilities
    ah -> core: Start unprovisioned device beacon
    ah -> core: Listen for provisioning invite
    end
    ... Wait for provisioning to complete ...
    core -> ah: Provisioning Events
    ah -> a: provisioning_complete_cb()
end

@enduml

PlantUML version 1.2017.16(Sun Sep 03 12:53:37 CEST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_171-b11
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>