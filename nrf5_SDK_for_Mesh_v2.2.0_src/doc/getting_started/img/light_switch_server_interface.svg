<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1062px" preserveAspectRatio="none" style="width:859px;height:1062px;" version="1.1" viewBox="0 0 859 1062" width="859px" zoomAndPan="magnify"><defs><filter height="300%" id="f1remwcpibqr66" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" height="1047.1089" style="stroke: #A80036; stroke-width: 1.0;" width="317" x="100" y="4"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="222.5" y="16.4065">Application</text><rect fill="#DDDDDD" height="1047.1089" style="stroke: #A80036; stroke-width: 1.0;" width="149" x="682" y="4"/><rect fill="#FFFFFF" filter="url(#f1remwcpibqr66)" height="471.3315" style="stroke: #000000; stroke-width: 2.0;" width="753" x="94" y="508.5801"/><rect fill="#FFFFFF" height="297.939" style="stroke: none; stroke-width: 1.0;" width="753" x="94" y="681.9727"/><rect fill="#FFFFFF" filter="url(#f1remwcpibqr66)" height="113.7949" style="stroke: #000000; stroke-width: 2.0;" width="585" x="252" y="760.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="74.146" y2="138.0435"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="138.0435" y2="178.6924"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="178.6924" y2="294.4873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="294.4873" y2="335.1362"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="335.1362" y2="393.0337"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="393.0337" y2="433.6826"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="433.6826" y2="525.5288"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="525.5288" y2="566.1777"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="566.1777" y2="683.9727"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="683.9727" y2="724.6216"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="724.6216" y2="881.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="881.3652" y2="922.0142"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="922.0142" y2="996.9116"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="74.146" y2="138.0435"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="138.0435" y2="178.6924"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="178.6924" y2="294.4873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="294.4873" y2="335.1362"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="335.1362" y2="393.0337"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="393.0337" y2="433.6826"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="433.6826" y2="525.5288"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="525.5288" y2="566.1777"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="566.1777" y2="683.9727"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="683.9727" y2="724.6216"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="724.6216" y2="881.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="881.3652" y2="922.0142"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="922.0142" y2="996.9116"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="74.146" y2="138.0435"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="138.0435" y2="178.6924"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="178.6924" y2="294.4873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="294.4873" y2="335.1362"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="335.1362" y2="393.0337"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="393.0337" y2="433.6826"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="433.6826" y2="525.5288"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="525.5288" y2="566.1777"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="566.1777" y2="683.9727"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="683.9727" y2="724.6216"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="724.6216" y2="881.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="881.3652" y2="922.0142"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="922.0142" y2="996.9116"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="599" x2="599" y1="74.146" y2="138.0435"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="599" x2="599" y1="138.0435" y2="178.6924"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="599" x2="599" y1="178.6924" y2="294.4873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="599" x2="599" y1="294.4873" y2="335.1362"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="599" x2="599" y1="335.1362" y2="393.0337"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="599" x2="599" y1="393.0337" y2="433.6826"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="599" x2="599" y1="433.6826" y2="525.5288"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="599" x2="599" y1="525.5288" y2="566.1777"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="599" x2="599" y1="566.1777" y2="683.9727"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="599" x2="599" y1="683.9727" y2="724.6216"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="599" x2="599" y1="724.6216" y2="881.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="599" x2="599" y1="881.3652" y2="922.0142"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="599" x2="599" y1="922.0142" y2="996.9116"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="756" x2="756" y1="74.146" y2="138.0435"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="756" x2="756" y1="138.0435" y2="178.6924"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="756" x2="756" y1="178.6924" y2="294.4873"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="756" x2="756" y1="294.4873" y2="335.1362"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="756" x2="756" y1="335.1362" y2="393.0337"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="756" x2="756" y1="393.0337" y2="433.6826"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="756" x2="756" y1="433.6826" y2="525.5288"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="756" x2="756" y1="525.5288" y2="566.1777"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="756" x2="756" y1="566.1777" y2="683.9727"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="756" x2="756" y1="683.9727" y2="724.6216"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="756" x2="756" y1="724.6216" y2="881.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="756" x2="756" y1="881.3652" y2="922.0142"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="756" x2="756" y1="922.0142" y2="996.9116"/><rect fill="#FEFECE" filter="url(#f1remwcpibqr66)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="55" x="104" y="39.0474"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="111" y="59.4082">main.c</text><rect fill="#FEFECE" filter="url(#f1remwcpibqr66)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="55" x="104" y="995.9116"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="111" y="1016.2725">main.c</text><rect fill="#FEFECE" filter="url(#f1remwcpibqr66)" height="46.1973" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="274" y="22.9487"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="281" y="43.3096">Application support</text><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="315" y="59.4082">modules</text><rect fill="#FEFECE" filter="url(#f1remwcpibqr66)" height="46.1973" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="274" y="995.9116"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="281" y="1016.2725">Application support</text><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="315" y="1032.3711">modules</text><rect fill="#FEFECE" filter="url(#f1remwcpibqr66)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="423" y="39.0474"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="430" y="59.4082">Mesh stack</text><rect fill="#FEFECE" filter="url(#f1remwcpibqr66)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="423" y="995.9116"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="430" y="1016.2725">Mesh stack</text><rect fill="#FEFECE" filter="url(#f1remwcpibqr66)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="522" y="39.0474"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="529" y="59.4082">Generic OnOff server</text><rect fill="#FEFECE" filter="url(#f1remwcpibqr66)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="522" y="995.9116"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="529" y="1016.2725">Generic OnOff server</text><rect fill="#FEFECE" filter="url(#f1remwcpibqr66)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="686" y="39.0474"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="693" y="59.4082">Mesh core modules</text><rect fill="#FEFECE" filter="url(#f1remwcpibqr66)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="686" y="995.9116"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="693" y="1016.2725">Mesh core modules</text><polygon fill="#FBFB77" filter="url(#f1remwcpibqr66)" points="8,89.146,8,128.146,255,128.146,255,99.146,245,89.146,8,89.146" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="245" y1="89.146" y2="99.146"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="245" y1="99.146" y2="99.146"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="14" y="106.5525">init_params defines UUID, core params</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="18" y="121.5012">and event callbacks</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="426.5" y="162.5413">Initialize</text><polygon fill="#A80036" points="331.5,194.6924,341.5,198.6924,331.5,202.6924,335.5,198.6924" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="337.5" y1="198.6924" y2="198.6924"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="140.5" y="195.0989">mesh_softdevice_init(...)</text><polygon fill="#A80036" points="331.5,223.6411,341.5,227.6411,331.5,231.6411,335.5,227.6411" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="337.5" y1="227.6411" y2="227.6411"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="140.5" y="224.0476">mesh_app_uuid_gen(...)</text><polygon fill="#A80036" points="455.5,252.5898,465.5,256.5898,455.5,260.5898,459.5,256.5898" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="461.5" y1="256.5898" y2="256.5898"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="140.5" y="252.9963">mesh_stack_init(...)</text><polygon fill="#A80036" points="744.5,281.5386,754.5,285.5386,744.5,289.5386,748.5,285.5386" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467.5" x2="750.5" y1="285.5386" y2="285.5386"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="474.5" y="281.9451">Initialize: Mesh and Foundation models</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="446.5" y="318.9851"/><polygon fill="#A80036" points="331.5,351.1362,341.5,355.1362,331.5,359.1362,335.5,355.1362" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="337.5" y1="355.1362" y2="355.1362"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="140.5" y="351.5427">app_onoff_init(...)</text><polygon fill="#A80036" points="587,380.085,597,384.085,587,388.085,591,384.085" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="593" y1="384.085" y2="384.085"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="350.5" y="380.4915">generic_onoff_server_init(...)</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="23" x="433.5" y="417.5315">Start</text><polygon fill="#A80036" points="455.5,449.6826,465.5,453.6826,455.5,457.6826,459.5,453.6826" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="461.5" y1="453.6826" y2="453.6826"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="140.5" y="450.0891">mesh_stack_start()</text><polygon fill="#FBFB77" filter="url(#f1remwcpibqr66)" points="389,467.6313,389,491.6313,542,491.6313,542,477.6313,532,467.6313,389,467.6313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="532" x2="532" y1="467.6313" y2="477.6313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="532" y1="477.6313" y2="477.6313"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="395" y="485.0378">Start dynamic behavior</text><rect fill="none" height="471.3315" style="stroke: #000000; stroke-width: 2.0;" width="753" x="94" y="508.5801"/><polygon fill="#EEEEEE" points="94,508.5801,155,508.5801,155,514.5801,145,524.5801,94,524.5801,94,508.5801" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="109" y="521.9866">alt</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="403.5" y="550.0266">Provisioned node</text><polygon fill="#A80036" points="354.5,582.1777,344.5,586.1777,354.5,590.1777,350.5,586.1777" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="348.5" x2="598" y1="586.1777" y2="586.1777"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="360.5" y="582.5842">Model APIs: get_cb(...), set_cb(...)</text><polygon fill="#A80036" points="144.5,611.1265,134.5,615.1265,144.5,619.1265,140.5,615.1265" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="138.5" x2="342.5" y1="615.1265" y2="615.1265"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="150.5" y="611.533">app_onoff_get/set_cb(...)</text><polygon fill="#A80036" points="331.5,640.0752,341.5,644.0752,331.5,648.0752,335.5,644.0752" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="337.5" y1="644.0752" y2="644.0752"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="140.5" y="640.4817">app_onoff_status_publish(...)</text><polygon fill="#A80036" points="587,669.0239,597,673.0239,587,677.0239,591,673.0239" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="593" y1="673.0239" y2="673.0239"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="350.5" y="669.4304">generic_onoff_server_status_publish(...)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="94" x2="847" y1="682.9727" y2="682.9727"/><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="393" y="708.4705">Unprovisioned device</text><polygon fill="#A80036" points="331.5,740.6216,341.5,744.6216,331.5,748.6216,335.5,744.6216" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="337.5" y1="744.6216" y2="744.6216"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="140.5" y="741.0281">mesh_provisionee_prov_start(...)</text><rect fill="none" height="113.7949" style="stroke: #000000; stroke-width: 2.0;" width="585" x="252" y="760.5703"/><polygon fill="#EEEEEE" points="252,760.5703,430,760.5703,430,766.5703,420,776.5703,252,776.5703,252,760.5703" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="267" y="773.9768">Initialize provisionee</text><polygon fill="#FBFB77" filter="url(#f1remwcpibqr66)" points="262,782.519,262,806.519,421,806.519,421,792.519,411,782.519,262,782.519" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="411" x2="411" y1="782.519" y2="792.519"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="421" x2="411" y1="792.519" y2="792.519"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="268" y="799.9255">Define OOB capabilities</text><polygon fill="#A80036" points="744.5,832.4678,754.5,836.4678,744.5,840.4678,748.5,836.4678" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="750.5" y1="836.4678" y2="836.4678"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="350.5" y="832.8743">Start unprovisioned device beacon</text><polygon fill="#A80036" points="744.5,861.4165,754.5,865.4165,744.5,869.4165,748.5,865.4165" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="750.5" y1="865.4165" y2="865.4165"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="350.5" y="861.823">Listen for provisioning invite</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="157" x="366.5" y="905.863">Wait for provisioning to complete</text><polygon fill="#A80036" points="354.5,938.0142,344.5,942.0142,354.5,946.0142,350.5,942.0142" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="348.5" x2="755.5" y1="942.0142" y2="942.0142"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="360.5" y="938.4207">Provisioning Events</text><polygon fill="#A80036" points="144.5,966.9629,134.5,970.9629,144.5,974.9629,140.5,970.9629" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="138.5" x2="342.5" y1="970.9629" y2="970.9629"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="150.5" y="967.3694">provisioning_complete_cb()</text><!--
@startuml
skinparam defaultFontName Arial
box "Application" #FFFFFF
participant a as "main.c"
participant ah as "Application support\nmodules"
end box
participant c as "Mesh stack"
participant s as "Generic OnOff server"
box
participant core as "Mesh core modules"
end box

note over a: init_params defines UUID, core params\n and event callbacks
... Initialize ...
a -> ah: mesh_softdevice_init(...)
a -> ah: mesh_app_uuid_gen(...)
a -> c: mesh_stack_init(...)
c -> core: Initialize: Mesh and Foundation models
... ...
a -> ah: app_onoff_init(...)
ah -> s: generic_onoff_server_init(...)
... Start ...
a -> c: mesh_stack_start()
note over c: Start dynamic behavior


alt
    ... Provisioned node ...
    ah <- s: Model APIs: get_cb(...), set_cb(...)
    a <- ah: app_onoff_get/set_cb(...)
    a -> ah: app_onoff_status_publish(...)
    ah -> s: generic_onoff_server_status_publish(...)

else
    ... Unprovisioned device ...
    a -> ah: mesh_provisionee_prov_start(...)
    group Initialize provisionee
    note over ah: Define OOB capabilities
    ah -> core: Start unprovisioned device beacon
    ah -> core: Listen for provisioning invite
    end
    ... Wait for provisioning to complete ...
    core -> ah: Provisioning Events
    ah -> a: provisioning_complete_cb()
end

@enduml

PlantUML version 1.2017.16(Sun Sep 03 12:53:37 CEST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_171-b11
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>